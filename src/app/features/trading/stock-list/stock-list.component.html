<div class="container mt-4">
    <h3>Available Stocks</h3>
    <div *ngIf="clientStatus">
        <h3>{{ clientStatus.name }}'s Portfolio</h3>
        <p>Cash Balance: {{ clientStatus.cashBalance | number:'1.2-2' }}</p>
    </div>
    <div *ngIf="loading">Loading...</div>
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

    <table *ngIf="!loading && stocks.length && !error" class="table table-striped">
        <thead>
            <tr>
                <th>Symbol</th>
                <th>Name</th>
                <th>Price</th>
                <th>Owned Shares</th> <!-- new column -->
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let s of stocks">
                <td>{{ s.symbol }}</td>
                <td>{{ s.name }}</td>
                <td>{{ s.currentPrice | number:'1.2-2' }}</td>
                <td>{{ getOwnedShares(s.id) }}</td> <!-- show owned shares -->
                <td>
                    <button class="btn btn-sm btn-primary me-2" (click)="openTrade(s, 'buy')"
                        [disabled]="clientStatus?.cashBalance! < s.currentPrice">
                        Buy
                    </button>
                    <button class="btn btn-sm btn-outline-secondary" (click)="openTrade(s, 'sell')"
                        [disabled]="getOwnedShares(s.id) === 0">
                        Sell
                    </button>
                </td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="!loading && !stocks.length">No stocks found.</div>
</div>